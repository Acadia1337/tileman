<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>TileMan by osmfj</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>TileMan</h1>
        <h2>OpenStreetMap &quot;Tile-cache&quot; and &quot;Tile-server&quot; recipe with Nginx and embeded Lua. A backend is Tirex, mapnik and PostGIS.</h2>
        <a href="https://github.com/osmfj/tileman" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>Tileserver recipe for tile.openstreetmap.jp</h1>

<p>Author: Hiroshi Miura, OpenStreetMap Foundation Japan <a href="mailto:miurahr@osmf.jp">miurahr@osmf.jp</a></p>

<p>Here is a repository to maintain tile.openstreetmap.jp tile cache/tile server.
It uses following technologies.</p>

<ul>
<li><p>Nginx Web server (tested on nginx v1.4.1 + lua-module 0.8.1)
we provide PPA for ubuntu user. You need to select nginx-extras package.</p></li>
<li><p>Tirex, rendering backend 0.4.1</p></li>
<li><p>PostGIS 2.0 /postgresql 9.1</p></li>
<li><p>osm2pgsql</p></li>
<li><p>osmosis (recommend v0.40 or later)</p></li>
</ul><p>This recipe is intended to run on Ubuntu 12.04.2(x86_64) server but it may be
useful for other platform and who want to run osm tile server.</p>

<h2>Version</h2>

<p>Ver 1.1
Release: 26, May, 2013</p>

<h2>Install</h2>

<p><a href="https://github.com/osmfj/tileman/wiki/Setup-development-environment-using-Vagrant">Setup development environment using Vagrant</a></p>

<h2>License</h2>

<p>The nginx recipe and lua script is distributed under AGPLv3.
render_expire is made by Frederik Ramm <a href="mailto:frederik@remote.org">frederik@remote.org</a> and distirbuted
by GPLv2.
Each softwares are under the each licenses.</p>

<h2>Maintainer</h2>

<p>It is maintained by OpenStreetMap Foundation Japan.</p>

<h2>Contributors</h2>

<p>Many thanks to contributors! <a href="https://github.com/osmfj/tileman/contributors"> here is contributors activities</a></p>

<h1>Design</h1>

<p>Nginx serves tile proxy. It returns disk cache and escalate to upstream
tile.openstreetmap.org servers when needed.
Lua script included by Nginx controls local rendering.
It is an asumption that postgis server has limited osm data in region.</p>

<p>Lua script retrive x/y/z parameter and check an existence of 
tile data. If it is out of area where the server provided, it goes upstream.</p>

<p>We need another script to maintain tile generation control.
We can get expire.list as "Tile expire method" explaines when importing diff.osm.
<a href="http://wiki.openstreetmap.org/wiki/Tile_expire_methods">http://wiki.openstreetmap.org/wiki/Tile_expire_methods</a></p>

<h2>planet import</h2>

<p>The directory updatedb has an incremental update script and primary load script
for osm data.
It is now defaults geofabrik data and also supposed to use planet.osm.org data. </p>

<h1>Data</h1>

<p>This distribution includes several tile images.</p>

<p>It can be used to replace some tiles,  where some country law request to 
display specific name.</p>

<p>There are several places where multiple laws in countries requires incoherent 
rules, such as administration claims.</p>

<p>A nginx configuration, statictile provides a solution for these case.
For details, please refer doc/statictile.ja.txt</p>
<!--
<script src="https://embed.github.com/view/geojson/osmfj/tileman/gh-pages/<path_to_file>"></script>
-->
        </section>

        <aside id="sidebar">
          <a href="https://github.com/osmfj/tileman/archive/v1.1.zip" class="button">
            <small>Download</small>
            v1.1.zip file
          </a>
          <a href="https://github.com/osmfj/tileman/archive/v1.1.tar.gz" class="button">
            <small>Download</small>
            v1.1.tar.gz file
          </a>

          <a href="https://github.com/osmfj/tileman/zipball/master" class="button">
            <small>Download</small>
            <small>devel.zip file</small>
          </a>
          <a href="https://github.com/osmfj/tileman/tarball/master" class="button">
            <small>Download</small>
            <small>devel.tar.gz file</small>
          </a>

          <p class="repo-owner"><a href="https://github.com/osmfj/tileman">TileMan</a> is maintained by <a href="https://github.com/osmfj">OpenStreetMap Foundation Japan</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
